<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BFIDCLPC ERP | Store</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;600;700&display=swap');
        body { font-family: 'Hind Siliguri', sans-serif; background: #f0f4f8; }
        .glass-card { background: white; border-radius: 15px; box-shadow: 0 4px 20px rgba(0,0,0,0.08); }
        .low-stock { background-color: #ffdce0 !important; color: #d32f2f !important; font-weight: bold; }
        .nav-active { background: #004d40 !important; color: white !important; }
        th { background: #004d40; color: white; padding: 12px; font-size: 12px; border: 1px solid #00332a; }
        td { padding: 10px; border: 1px solid #ddd; text-align: center; font-size: 13px; }
    </style>
</head>
<body class="pb-24">

    <header class="bg-[#004d40] text-white p-6 text-center shadow-lg">
        <h1 class="text-xl font-bold">বাংলাদেশ বনশিল্প উন্নয়ন কর্পোরেশন</h1>
        <p class="text-[10px] opacity-80 uppercase tracking-widest">LPC & Rubber Dam Unit, Kaptai</p>
    </header>

    <main class="p-4 max-w-4xl mx-auto space-y-6">
        
        <section id="tab-in" class="tab-content glass-card p-6">
            <h2 class="text-sm font-bold mb-4 text-[#004d40] border-b pb-2">ভাণ্ডার গ্রহণ এন্ট্রি (SRN)</h2>
            <div class="space-y-4">
                <div class="flex gap-2">
                    <input type="text" id="srnNo" placeholder="SRN নং" class="w-1/3 p-3 border rounded-xl outline-none focus:border-green-600">
                    <input type="date" id="entryDate" class="w-2/3 p-3 border rounded-xl outline-none">
                </div>
                
                <select id="regSelect" onchange="updateItems()" class="w-full p-4 border rounded-xl bg-gray-50 font-bold">
                    <option value="">রেজিস্টার সিলেক্ট করুন</option>
                    <option value="1">১ নং রেজিস্টার (খুচরা যন্ত্রাংশ)</option>
                    <option value="2">২ নং রেজিস্টার (ইলেকট্রিক ও হার্ডওয়্যার)</option>
                    <option value="3">৩ নং রেজিস্টার (অন্যান্য মালামাল)</option>
                </select>

                <select id="itemSelect" class="w-full p-4 border rounded-xl bg-white">
                    <option value="">আগে রেজিস্টার সিলেক্ট করুন</option>
                </select>

                <div class="grid grid-cols-2 gap-3">
                    <input type="number" id="itemQty" placeholder="পরিমাণ" class="p-4 border rounded-xl">
                    <input type="number" id="itemPrice" placeholder="দর (৳)" class="p-4 border rounded-xl">
                </div>
                
                <button onclick="saveEntry()" class="w-full bg-[#004d40] text-white py-4 rounded-xl font-bold text-lg shadow-lg active:scale-95 transition-transform">স্টক সেভ করুন</button>
            </div>
        </section>

        <section id="tab-ledger" class="tab-content hidden glass-card overflow-hidden">
            <div class="p-4 bg-gray-100 font-bold text-[#004d40] flex justify-between">
                <span>ভাণ্ডার খতিয়ান (Ledger)</span>
                <span class="text-[10px] text-red-600">* লাল = ৫ এর কম স্টক</span>
            </div>
            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead>
                        <tr>
                            <th>তারিখ/SRN</th>
                            <th>মালামালের নাম</th>
                            <th>পরিমাণ</th>
                            <th>মূল্য (৳)</th>
                        </tr>
                    </thead>
                    <tbody id="ledgerBody"></tbody>
                </table>
            </div>
        </section>

    </main>

    <nav class="fixed bottom-4 left-4 right-4 bg-white flex p-2 glass-card justify-around z-50 border border-gray-200">
        <button onclick="showTab('in')" id="btn-in" class="flex-1 py-3 rounded-xl nav-active"><i class="fa-solid fa-plus-circle block mb-1"></i><span class="text-[10px]">এন্ট্রি</span></button>
        <button onclick="showTab('ledger')" id="btn-ledger" class="flex-1 py-3 rounded-xl text-gray-400"><i class="fa-solid fa-book-open block mb-1"></i><span class="text-[10px]">খতিয়ান</span></button>
    </nav>

    <script>
        // আপনার দেওয়া ১-৩ নং মালামালের তালিকা
        const registerItems = {
            "1": ["বিয়ারিং (Bearing)", "ইঞ্জিন পার্টস", "পিস্টন (Piston)", "লাইনার (Liner)", "ভল্ভ (Valve)", "কানেক্টিং রড", "নজল (Nozzle)", "পাম্প পার্টস", "ফিল্টার (অয়েল/ডিজেল)"],
            "2": ["ইলেকট্রিক বাল্ব/টিউব", "সুইচ/সকেট", "তার (Cable)", "সার্কিট ব্রেকার", "গ্রাইন্ডিং হুইল", "ওয়েল্ডিং রড", "হ্যান্ড টুলস", "নাট-বোল্ট (Nut-Bolt)", "জি আই পাইপ/ফিটিংস", "কম্পিউটার পার্টস"],
            "3": ["স্টেশনারী মালামাল", "টায়ার ও টিউব", "ভি-বেল্ট (V-Belt)", "জেনারেটর পার্টস", "মোটর সাইকেল পার্টস", "রেস্ট হাউজ সাপ্লাই", "লুব্রিকেন্ট/মবিল", "ডিজেল/অক্টেন"]
        };

        let db = JSON.parse(localStorage.getItem('bfidclpc_final')) || { entries: [] };

        function updateItems() {
            const reg = document.getElementById('regSelect').value;
            const itemDropdown = document.getElementById('itemSelect');
            itemDropdown.innerHTML = '<option value="">মালামাল সিলেক্ট করুন</option>';
            if(reg) {
                registerItems[reg].forEach(item => {
                    itemDropdown.innerHTML += `<option value="${item}">${item}</option>`;
                });
            }
        }

        function showTab(id) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.add('hidden'));
            document.getElementById('tab-' + id).classList.remove('hidden');
            document.querySelectorAll('nav button').forEach(b => b.classList.remove('nav-active', 'text-gray-400'));
            document.getElementById('btn-' + id).classList.add('nav-active');
            if(id === 'ledger') renderLedger();
        }

        function saveEntry() {
            const date = document.getElementById('entryDate').value;
            const srn = document.getElementById('srnNo').value;
            const name = document.getElementById('itemSelect').value;
            const qty = parseFloat(document.getElementById('itemQty').value) || 0;
            const price = parseFloat(document.getElementById('itemPrice').value) || 0;

            if(!name || qty <= 0 || !date) return alert("দয়া করে সব তথ্য পূরণ করুন!");

            db.entries.push({ date, srn, name, qty, price });
            localStorage.setItem('bfidclpc_final', JSON.stringify(db));
            alert("সফলভাবে সেভ হয়েছে!");
            document.getElementById('itemQty').value = '';
            document.getElementById('itemPrice').value = '';
        }

        function renderLedger() {
            const body = document.getElementById('ledgerBody');
            body.innerHTML = db.entries.map(item => `
                <tr class="${item.qty < 5 ? 'low-stock' : ''}">
                    <td>${item.date}<br><small class="text-gray-500">SRN: ${item.srn}</small></td>
                    <td class="font-bold text-left">${item.name}</td>
                    <td>${item.qty}</td>
                    <td class="font-bold">৳${(item.qty * item.price).toLocaleString()}</td>
                </tr>
            `).reverse().join('');
        }
    </script>
</body>
</html>
